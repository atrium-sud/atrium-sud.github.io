YUI.add("dd-ddm-drop",function(t,i){t.mix(t.DD.DDM,{_noShim:!1,_activeShims:[],_hasActiveShim:function(){return!!this._noShim||this._activeShims.length},_addActiveShim:function(t){this._activeShims.push(t)},_removeActiveShim:function(i){var e=[];t.Array.each(this._activeShims,function(t){t._yuid!==i._yuid&&e.push(t)}),this._activeShims=e},syncActiveShims:function(i){t.later(0,this,function(i){var e=i?this.targets:this._lookup();t.Array.each(e,function(t){t.sizeShim.call(t)},this)},i)},mode:0,POINT:0,INTERSECT:1,STRICT:2,useHash:!0,activeDrop:null,validDrops:[],otherDrops:{},targets:[],_addValid:function(t){return this.validDrops.push(t),this},_removeValid:function(i){var e=[];return t.Array.each(this.validDrops,function(t){t!==i&&e.push(t)}),this.validDrops=e,this},isOverTarget:function(t){if(this.activeDrag&&t){var i,e,r=this.activeDrag.mouseXY,a=this.activeDrag.get("dragMode"),h=t.shim;if(r&&this.activeDrag){if(e=this.activeDrag.region,a===this.STRICT)return this.activeDrag.get("dragNode").inRegion(t.region,!0,e);if(t&&t.shim)return a===this.INTERSECT&&this._noShim?(i=e||this.activeDrag.get("node"),t.get("node").intersect(i,t.region).inRegion):(this._noShim&&(h=t.get("node")),h.intersect({top:r[1],bottom:r[1],left:r[0],right:r[0]},t.region).inRegion)}}return!1},clearCache:function(){this.validDrops=[],this.otherDrops={},this._activeShims=[]},_activateTargets:function(){this._noShim=!0,this.clearCache(),t.Array.each(this.targets,function(t){t._activateShim([]),!0===t.get("noShim")&&(this._noShim=!1)},this),this._handleTargetOver()},getBestMatch:function(i,e){var r,a=null,h=0;return t.Object.each(i,function(t){var i=this.activeDrag.get("dragNode").intersect(t.get("node"));t.region.area=i.area,i.inRegion&&i.area>h&&(h=i.area,a=t)},this),e?(r=[],t.Object.each(i,function(t){t!==a&&r.push(t)},this),[a,r]):a},_deactivateTargets:function(){var i,e=[],r=this.activeDrag,a=this.activeDrop;r&&a&&this.otherDrops[a]?(r.get("dragMode")?(a=(i=this.getBestMatch(this.otherDrops,!0))[0],e=i[1]):delete(e=this.otherDrops)[a],r.get("node").removeClass(this.CSS_PREFIX+"-drag-over"),a&&(a.fire("drop:hit",{drag:r,drop:a,others:e}),r.fire("drag:drophit",{drag:r,drop:a,others:e}))):r&&r.get("dragging")&&(r.get("node").removeClass(this.CSS_PREFIX+"-drag-over"),r.fire("drag:dropmiss",{pageX:r.lastXY[0],pageY:r.lastXY[1]})),this.activeDrop=null,t.Array.each(this.targets,function(t){t._deactivateShim([])},this)},_dropMove:function(){this._hasActiveShim()?this._handleTargetOver():t.Object.each(this.otherDrops,function(t){t._handleOut.apply(t,[])})},_lookup:function(){if(!this.useHash||this._noShim)return this.validDrops;var i=[];return t.Array.each(this.validDrops,function(t){t.shim&&t.shim.inViewportRegion(!1,t.region)&&i.push(t)}),i},_handleTargetOver:function(){var i=this._lookup();t.Array.each(i,function(t){t._handleTargetOver.call(t)},this)},_regTarget:function(t){this.targets.push(t)},_unregTarget:function(i){var e,r=[];t.Array.each(this.targets,function(t){t!==i&&r.push(t)},this),this.targets=r,e=[],t.Array.each(this.validDrops,function(t){t!==i&&e.push(t)}),this.validDrops=e},getDrop:function(i){var e=!1,r=t.one(i);return r instanceof t.Node&&t.Array.each(this.targets,function(t){r.compareTo(t.get("node"))&&(e=t)}),e}},!0)},"patched-v3.18.1",{requires:["dd-ddm"]});
YUI.add("dd-drop",function(t,e){var i="node",r=t.DD.DDM,s="offsetHeight",a="offsetWidth",h="drop:over",o="drop:enter",d="drop:exit",n=function(){this._lazyAddAttrs=!1,n.superclass.constructor.apply(this,arguments),t.on("domready",t.bind(function(){t.later(100,this,this._createShim)},this)),r._regTarget(this)};n.NAME="drop",n.ATTRS={node:{setter:function(e){var i=t.one(e);return i||t.error("DD.Drop: Invalid Node Given: "+e),i}},groups:{value:["default"],getter:function(){return this._groups?t.Object.keys(this._groups):(this._groups={},[])},setter:function(e){return this._groups=t.Array.hash(e),e}},padding:{value:"0",setter:function(t){return r.cssSizestoObject(t)}},lock:{value:!1,setter:function(t){return t?this.get(i).addClass(r.CSS_PREFIX+"-drop-locked"):this.get(i).removeClass(r.CSS_PREFIX+"-drop-locked"),t}},bubbles:{setter:function(t){return this.addTarget(t),t}},useShim:{value:!0,setter:function(e){return t.DD.DDM._noShim=!e,e}}},t.extend(n,t.Base,{_bubbleTargets:t.DD.DDM,addToGroup:function(t){return this._groups[t]=!0,this},removeFromGroup:function(t){return delete this._groups[t],this},_createEvents:function(){var e=[h,o,d,"drop:hit"];t.Array.each(e,function(t){this.publish(t,{type:t,emitFacade:!0,preventable:!1,bubbles:!0,queuable:!1,prefix:"drop"})},this)},_valid:null,_groups:null,shim:null,region:null,overTarget:null,inGroup:function(e){this._valid=!1;var i=!1;return t.Array.each(e,function(t){this._groups[t]&&(i=!0,this._valid=!0)},this),i},initializer:function(){t.later(100,this,this._createEvents);var e,s=this.get(i);s.get("id")||(e=t.stamp(s),s.set("id",e)),s.addClass(r.CSS_PREFIX+"-drop"),this.set("groups",this.get("groups"))},destructor:function(){r._unregTarget(this),this.shim&&this.shim!==this.get(i)&&(this.shim.detachAll(),this.shim.remove(),this.shim=null),this.get(i).removeClass(r.CSS_PREFIX+"-drop"),this.detachAll()},_deactivateShim:function(){if(!this.shim)return!1;this.get(i).removeClass(r.CSS_PREFIX+"-drop-active-valid"),this.get(i).removeClass(r.CSS_PREFIX+"-drop-active-invalid"),this.get(i).removeClass(r.CSS_PREFIX+"-drop-over"),this.get("useShim")&&this.shim.setStyles({top:"-999px",left:"-999px",zIndex:"1"}),this.overTarget=!1},_activateShim:function(){if(!r.activeDrag)return!1;if(this.get(i)===r.activeDrag.get(i))return!1;if(this.get("lock"))return!1;var t=this.get(i);this.inGroup(r.activeDrag.get("groups"))?(t.removeClass(r.CSS_PREFIX+"-drop-active-invalid"),t.addClass(r.CSS_PREFIX+"-drop-active-valid"),r._addValid(this),this.overTarget=!1,this.get("useShim")||(this.shim=this.get(i)),this.sizeShim()):(r._removeValid(this),t.removeClass(r.CSS_PREFIX+"-drop-active-valid"),t.addClass(r.CSS_PREFIX+"-drop-active-invalid"))},sizeShim:function(){if(!r.activeDrag)return!1;if(this.get(i)===r.activeDrag.get(i))return!1;if(this.get("lock"))return!1;if(!this.shim)return t.later(100,this,this.sizeShim),!1;var e,h,o,d=this.get(i),n=d.get(s),g=d.get(a),v=d.getXY(),l=this.get("padding");g=g+l.left+l.right,n=n+l.top+l.bottom,v[0]=v[0]-l.left,v[1]=v[1]-l.top,r.activeDrag.get("dragMode")===r.INTERSECT&&(n+=h=(e=r.activeDrag).get(i).get(s),g+=o=e.get(i).get(a),v[0]=v[0]-(o-e.deltaXY[0]),v[1]=v[1]-(h-e.deltaXY[1])),this.get("useShim")&&this.shim.setStyles({height:n+"px",width:g+"px",top:v[1]+"px",left:v[0]+"px"}),this.region={0:v[0],1:v[1],area:0,top:v[1],right:v[0]+g,bottom:v[1]+n,left:v[0]}},_createShim:function(){if(r._pg){if(!this.shim){var e=this.get("node");this.get("useShim")&&((e=t.Node.create('<div id="'+this.get(i).get("id")+'_shim"></div>')).setStyles({height:this.get(i).get(s)+"px",width:this.get(i).get(a)+"px",backgroundColor:"yellow",opacity:".5",zIndex:"1",overflow:"hidden",top:"-900px",left:"-900px",position:"absolute"}),r._pg.appendChild(e),e.on("mouseover",t.bind(this._handleOverEvent,this)),e.on("mouseout",t.bind(this._handleOutEvent,this))),this.shim=e}}else t.later(10,this,this._createShim)},_handleTargetOver:function(){r.isOverTarget(this)?(this.get(i).addClass(r.CSS_PREFIX+"-drop-over"),r.activeDrop=this,r.otherDrops[this]=this,this.overTarget?(r.activeDrag.fire("drag:over",{drop:this,drag:r.activeDrag}),this.fire(h,{drop:this,drag:r.activeDrag})):r.activeDrag.get("dragging")&&(this.overTarget=!0,this.fire(o,{drop:this,drag:r.activeDrag}),r.activeDrag.fire("drag:enter",{drop:this,drag:r.activeDrag}),r.activeDrag.get(i).addClass(r.CSS_PREFIX+"-drag-over"))):this._handleOut()},_handleOverEvent:function(){this.shim.setStyle("zIndex","999"),r._addActiveShim(this)},_handleOutEvent:function(){this.shim.setStyle("zIndex","1"),r._removeActiveShim(this)},_handleOut:function(t){r.isOverTarget(this)&&!t||this.overTarget&&(this.overTarget=!1,t||r._removeActiveShim(this),r.activeDrag&&(this.get(i).removeClass(r.CSS_PREFIX+"-drop-over"),r.activeDrag.get(i).removeClass(r.CSS_PREFIX+"-drag-over"),this.fire(d,{drop:this,drag:r.activeDrag}),r.activeDrag.fire("drag:exit",{drop:this,drag:r.activeDrag}),delete r.otherDrops[this]))}}),t.DD.Drop=n},"patched-v3.18.1",{requires:["dd-drag","dd-ddm-drop"]});
YUI.add("dd-drop-plugin",function(d,n){var o=function(d){d.node=d.host,o.superclass.constructor.apply(this,arguments)};o.NAME="dd-drop-plugin",o.NS="drop",d.extend(o,d.DD.Drop),d.namespace("Plugin"),d.Plugin.Drop=o},"patched-v3.18.1",{requires:["dd-drop"]});
YUI.add("dd-delegate",function(e,t){var s=function(){s.superclass.constructor.apply(this,arguments)},n="container",i="nodes",d=e.Node.create("<div>Temp Node</div>");e.extend(s,e.Base,{_bubbleTargets:e.DD.DDM,dd:null,_shimState:null,_handles:null,_onNodeChange:function(e){this.set("dragNode",e.newVal)},_afterDragEnd:function(){e.DD.DDM._noShim=this._shimState,this.set("lastNode",this.dd.get("node")),this.get("lastNode").removeClass(e.DD.DDM.CSS_PREFIX+"-dragging"),this.dd._unprep(),this.dd.set("node",d)},_delMouseDown:function(t){var s=t.currentTarget,n=this.dd,d=s,a=this.get("dragConfig"),o=n.get("node");s.test(this.get(i))&&!s.test(this.get("invalid"))&&(this._shimState=e.DD.DDM._noShim,e.DD.DDM._noShim=!0,this.set("currentNode",s),o.inDoc()&&n._unprep(),n.set("node",s),a&&a.dragNode?d=a.dragNode:n.proxy&&(d=e.DD.DDM._proxy),n.set("dragNode",d),n._prep(),n.fire("drag:mouseDown",{ev:t}))},_onMouseEnter:function(){this._shimState=e.DD.DDM._noShim,e.DD.DDM._noShim=!0},_onMouseLeave:function(){e.DD.DDM._noShim=this._shimState},initializer:function(){this._handles=[];var t=this.get("dragConfig")||{},s=this.get(n);t.node=d.cloneNode(!0),t.bubbleTargets=this,this.get("handles")&&(t.handles=this.get("handles")),this.dd=new e.DD.Drag(t),this.dd.after("drag:end",e.bind(this._afterDragEnd,this)),this.dd.on("dragNodeChange",e.bind(this._onNodeChange,this)),this.dd.after("drag:mouseup",function(){this._unprep()}),this._handles.push(e.delegate(e.DD.Drag.START_EVENT,e.bind(this._delMouseDown,this),s,this.get(i))),this._handles.push(e.on("mouseenter",e.bind(this._onMouseEnter,this),s)),this._handles.push(e.on("mouseleave",e.bind(this._onMouseLeave,this),s)),e.later(50,this,this.syncTargets),e.DD.DDM.regDelegate(this)},syncTargets:function(){var t,s,d;if(e.Plugin.Drop&&!this.get("destroyed"))return this.get("target")&&(t=e.one(this.get(n)).all(this.get(i)),s=this.dd.get("groups"),(d=this.get("dragConfig"))&&d.groups&&(s=d.groups),t.each(function(e){this.createDrop(e,s)},this)),this},createDrop:function(t,s){var n={useShim:!1,bubbleTargets:this};return t.drop||t.plug(e.Plugin.Drop,n),t.drop.set("groups",s),t},destructor:function(){(this.dd&&this.dd.destroy(),e.Plugin.Drop)&&e.one(this.get(n)).all(this.get(i)).unplug(e.Plugin.Drop);e.Array.each(this._handles,function(e){e.detach()})}},{NAME:"delegate",ATTRS:{container:{value:"body"},nodes:{value:".dd-draggable"},invalid:{value:"input, select, button, a, textarea"},lastNode:{value:d},currentNode:{value:d},dragNode:{value:d},over:{value:!1},target:{value:!1},dragConfig:{value:null},handles:{value:null}}}),e.mix(e.DD.DDM,{_delegates:[],regDelegate:function(e){this._delegates.push(e)},getDelegate:function(t){var s=null;return t=e.one(t),e.Array.each(this._delegates,function(e){t.test(e.get(n))&&(s=e)},this),s}}),e.namespace("DD"),e.DD.Delegate=s},"patched-v3.18.1",{requires:["dd-drag","dd-drop-plugin","event-mouseenter"]});
YUI.add("resize-base",function(e,t){function Lt(){Lt.superclass.constructor.apply(this,arguments)}var n=e.Lang,r=n.isArray,i=n.isBoolean,s=n.isNumber,o=n.isString,u=e.Array,a=n.trim,f=u.indexOf,l=",",c=".",h="",p="{handle}",d=" ",v="active",m="activeHandle",g="activeHandleNode",y="all",b="autoHide",w="border",E="bottom",S="className",x="color",T="defMinHeight",N="defMinWidth",C="handle",k="handles",L="handlesWrapper",A="hidden",O="inner",M="left",_="margin",D="node",P="nodeName",H="none",B="offsetHeight",j="offsetWidth",F="padding",I="parentNode",q="position",R="relative",U="resize",z="resizing",W="right",X="static",V="style",$="top",J="width",K="wrap",Q="wrapper",G="wrapTypes",Y="resize:mouseUp",Z="resize:resize",et="resize:align",tt="resize:end",nt="resize:start",rt="t",it="tr",st="r",ot="br",ut="b",at="bl",ft="l",lt="tl",ct=function(){return Array.prototype.slice.call(arguments).join(d)},ht=function(e){return Math.round(parseFloat(e))||0},pt=function(e,t){return e.getComputedStyle(t)},dt=function(e){return C+e.toUpperCase()},vt=function(t){return t instanceof e.Node},mt=e.cached(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),gt=e.cached(function(){var e=[],t=u(arguments,0,!0);return u.each(t,function(t,n){n>0&&(t=mt(t)),e.push(t)}),e.join(h)}),yt=e.ClassNameManager.getClassName,bt=yt(U),wt=yt(U,C),Et=yt(U,C,v),St=yt(U,C,O),xt=yt(U,C,O,p),Tt=yt(U,C,p),Nt=yt(U,A,k),Ct=yt(U,k,Q),kt=yt(U,Q);e.mix(Lt,{NAME:U,ATTRS:{activeHandle:{value:null,validator:function(t){return e.Lang.isString(t)||e.Lang.isNull(t)}},activeHandleNode:{value:null,validator:vt},autoHide:{value:!1,validator:i},defMinHeight:{value:15,validator:s},defMinWidth:{value:15,validator:s},handles:{setter:"_setHandles",value:y},handlesWrapper:{readOnly:!0,setter:e.one,valueFn:"_valueHandlesWrapper"},node:{setter:e.one},resizing:{value:!1,validator:i},wrap:{setter:"_setWrap",value:!1,validator:i},wrapTypes:{readOnly:!0,value:/^canvas|textarea|input|select|button|img|iframe|table|embed$/i},wrapper:{readOnly:!0,valueFn:"_valueWrapper",writeOnce:!0}},RULES:{b:function(e,t,n){var r=e.info,i=e.originalInfo;r.offsetHeight=i.offsetHeight+n},l:function(e,t){var n=e.info,r=e.originalInfo;n.left=r.left+t,n.offsetWidth=r.offsetWidth-t},r:function(e,t){var n=e.info,r=e.originalInfo;n.offsetWidth=r.offsetWidth+t},t:function(e,t,n){var r=e.info,i=e.originalInfo;r.top=i.top+n,r.offsetHeight=i.offsetHeight-n},tr:function(){this.t.apply(this,arguments),this.r.apply(this,arguments)},bl:function(){this.b.apply(this,arguments),this.l.apply(this,arguments)},br:function(){this.b.apply(this,arguments),this.r.apply(this,arguments)},tl:function(){this.t.apply(this,arguments),this.l.apply(this,arguments)}},capitalize:gt}),e.Resize=e.extend(Lt,e.Base,{ALL_HANDLES:[rt,it,st,ot,ut,at,ft,lt],REGEX_CHANGE_HEIGHT:/^(t|tr|b|bl|br|tl)$/i,REGEX_CHANGE_LEFT:/^(tl|l|bl)$/i,REGEX_CHANGE_TOP:/^(tl|t|tr)$/i,REGEX_CHANGE_WIDTH:/^(bl|br|l|r|tl|tr)$/i,HANDLES_WRAP_TEMPLATE:'<div class="'+Ct+'"></div>',WRAP_TEMPLATE:'<div class="'+kt+'"></div>',HANDLE_TEMPLATE:'<div class="'+ct(wt,Tt)+'">'+'<div class="'+ct(St,xt)+'">&nbsp;</div>'+"</div>",totalHSurrounding:0,totalVSurrounding:0,nodeSurrounding:null,wrapperSurrounding:null,changeHeightHandles:!1,changeLeftHandles:!1,changeTopHandles:!1,changeWidthHandles:!1,delegate:null,info:null,lastInfo:null,originalInfo:null,initializer:function(){this._eventHandles=[],this.renderer()},renderUI:function(){var e=this;e._renderHandles()},bindUI:function(){var e=this;e._createEvents(),e._bindDD(),e._bindHandle()},syncUI:function(){var e=this;this.get(D).addClass(bt),e._setHideHandlesUI(e.get(b))},destructor:function(){var t=this,n=t.get(D),r=t.get(Q),i=r.get(I);e.each(t._eventHandles,function(e){e.detach()}),t._eventHandles.length=0,t.eachHandle(function(e){t.delegate.dd.destroy(),e.remove(!0)}),t.delegate.destroy(),t.get(K)&&(t._copyStyles(r,n),i&&i.insertBefore(n,r),r.remove(!0)),n.removeClass(bt),n.removeClass(Nt)},renderer:function(){this.renderUI(),this.bindUI(),this.syncUI()},eachHandle:function(t){var n=this;e.each(n.get(k),function(e,r){var i=n.get(dt(e));t.apply(n,[i,e,r])})},_bindDD:function(){var t=this;t.delegate=new e.DD.Delegate({bubbleTargets:t,container:t.get(L),dragConfig:{clickPixelThresh:0,clickTimeThresh:0,useShim:!0,move:!1},nodes:c+wt,target:!1}),t._eventHandles.push(t.on("drag:drag",t._handleResizeEvent),t.on("drag:dropmiss",t._handleMouseUpEvent),t.on("drag:end",t._handleResizeEndEvent),t.on("drag:start",t._handleResizeStartEvent))},_bindHandle:function(){var t=this,n=t.get(Q);t._eventHandles.push(n.on("mouseenter",e.bind(t._onWrapperMouseEnter,t)),n.on("mouseleave",e.bind(t._onWrapperMouseLeave,t)),n.delegate("mouseenter",e.bind(t._onHandleMouseEnter,t),c+wt),n.delegate("mouseleave",e.bind(t._onHandleMouseLeave,t),c+wt))},_createEvents:function(){var e=this,t=function(t,n){e.publish(t,{defaultFn:n,queuable:!1,emitFacade:!0,bubbles:!0,prefix:U})};t(nt,this._defResizeStartFn),t(Z,this._defResizeFn),t(et,this._defResizeAlignFn),t(tt,this._defResizeEndFn),t(Y,this._defMouseUpFn)},_renderHandles:function(){var e=this,t=e.get(Q),n=e.get(L);e.eachHandle(function(e){n.append(e)}),t.append(n)},_buildHandle:function(t){var n=this;return e.Node.create(e.Lang.sub(n.HANDLE_TEMPLATE,{handle:t}))},_calcResize:function(){var t=this,n=t.handle,r=t.info,i=t.originalInfo,s=r.actXY[0]-i.actXY[0],o=r.actXY[1]-i.actXY[1];n&&e.Resize.RULES[n]&&e.Resize.RULES[n](t,s,o)},_checkSize:function(e,t){var n=this,r=n.info,i=n.originalInfo,s=e===B?$:M;r[e]=t;if(s===M&&n.changeLeftHandles||s===$&&n.changeTopHandles)r[s]=i[s]+i[e]-t},_copyStyles:function(t,n){var r=t.getStyle(q).toLowerCase(),i=this._getBoxSurroundingInfo(t),s;r===X&&(r=R),s={position:r,left:pt(t,M),top:pt(t,$)},e.mix(s,i.margin),e.mix(s,i.border),n.setStyles(s),t.setStyles({border:0,margin:0}),n.sizeTo(t.get(j)+i.totalHBorder,t.get(B)+i.totalVBorder)},_extractHandleName:e.cached(function(e){var t=e.get(S),n=t.match(new RegExp(yt(U,C,"(\\w{1,2})\\b")));return n?n[1
]:null}),_getInfo:function(e,t){var n=[0,0],r=t.dragEvent.target,i=e.getXY(),s=i[0],o=i[1],u=e.get(B),a=e.get(j);return t&&(n=r.actXY.length?r.actXY:r.lastXY),{actXY:n,bottom:o+u,left:s,offsetHeight:u,offsetWidth:a,right:s+a,top:o}},_getBoxSurroundingInfo:function(t){var n={padding:{},margin:{},border:{}};return vt(t)&&e.each([$,W,E,M],function(e){var r=gt(F,e),i=gt(_,e),s=gt(w,e,J),o=gt(w,e,x),u=gt(w,e,V);n.border[o]=pt(t,o),n.border[u]=pt(t,u),n.border[s]=pt(t,s),n.margin[i]=pt(t,i),n.padding[r]=pt(t,r)}),n.totalHBorder=ht(n.border.borderLeftWidth)+ht(n.border.borderRightWidth),n.totalHPadding=ht(n.padding.paddingLeft)+ht(n.padding.paddingRight),n.totalVBorder=ht(n.border.borderBottomWidth)+ht(n.border.borderTopWidth),n.totalVPadding=ht(n.padding.paddingBottom)+ht(n.padding.paddingTop),n},_syncUI:function(){var t=this,n=t.info,r=t.wrapperSurrounding,i=t.get(Q),s=t.get(D);i.sizeTo(n.offsetWidth,n.offsetHeight),(t.changeLeftHandles||t.changeTopHandles)&&i.setXY([n.left,n.top]),i.compareTo(s)||s.sizeTo(n.offsetWidth-r.totalHBorder,n.offsetHeight-r.totalVBorder),e.UA.webkit&&s.setStyle(U,H)},_updateChangeHandleInfo:function(e){var t=this;t.changeHeightHandles=t.REGEX_CHANGE_HEIGHT.test(e),t.changeLeftHandles=t.REGEX_CHANGE_LEFT.test(e),t.changeTopHandles=t.REGEX_CHANGE_TOP.test(e),t.changeWidthHandles=t.REGEX_CHANGE_WIDTH.test(e)},_updateInfo:function(e){var t=this;t.info=t._getInfo(t.get(Q),e)},_updateSurroundingInfo:function(){var e=this,t=e.get(D),n=e.get(Q),r=e._getBoxSurroundingInfo(t),i=e._getBoxSurroundingInfo(n);e.nodeSurrounding=r,e.wrapperSurrounding=i,e.totalVSurrounding=r.totalVPadding+i.totalVBorder,e.totalHSurrounding=r.totalHPadding+i.totalHBorder},_setActiveHandlesUI:function(e){var t=this,n=t.get(g);n&&(e?(t.eachHandle(function(e){e.removeClass(Et)}),n.addClass(Et)):n.removeClass(Et))},_setHandles:function(t){var n=this,i=[];return r(t)?i=t:o(t)&&(t.toLowerCase()===y?i=n.ALL_HANDLES:e.each(t.split(l),function(e){var t=a(e);f(n.ALL_HANDLES,t)>-1&&i.push(t)})),i},_setHideHandlesUI:function(e){var t=this,n=t.get(Q);t.get(z)||(e?n.addClass(Nt):n.removeClass(Nt))},_setWrap:function(e){var t=this,n=t.get(D),r=n.get(P),i=t.get(G);return i.test(r)&&(e=!0),e},_defMouseUpFn:function(){var e=this;e.set(z,!1)},_defResizeFn:function(e){var t=this;t._resize(e)},_resize:function(e){var t=this;t._handleResizeAlignEvent(e.dragEvent),t._syncUI()},_defResizeAlignFn:function(e){var t=this;t._resizeAlign(e)},_resizeAlign:function(e){var t=this,n,r,i;t.lastInfo=t.info,t._updateInfo(e),n=t.info,t._calcResize(),t.con||(r=t.get(T)+t.totalVSurrounding,i=t.get(N)+t.totalHSurrounding,n.offsetHeight<=r&&t._checkSize(B,r),n.offsetWidth<=i&&t._checkSize(j,i))},_defResizeEndFn:function(e){var t=this;t._resizeEnd(e)},_resizeEnd:function(e){var t=this,n=e.dragEvent.target;n.actXY=[],t._syncUI(),t._setActiveHandlesUI(!1),t.set(m,null),t.set(g,null),t.handle=null},_defResizeStartFn:function(e){var t=this;t._resizeStart(e)},_resizeStart:function(e){var t=this,n=t.get(Q);t.handle=t.get(m),t.set(z,!0),t._updateSurroundingInfo(),t.originalInfo=t._getInfo(n,e),t._updateInfo(e)},_handleMouseUpEvent:function(e){this.fire(Y,{dragEvent:e,info:this.info})},_handleResizeEvent:function(e){this.fire(Z,{dragEvent:e,info:this.info})},_handleResizeAlignEvent:function(e){this.fire(et,{dragEvent:e,info:this.info})},_handleResizeEndEvent:function(e){this.fire(tt,{dragEvent:e,info:this.info})},_handleResizeStartEvent:function(e){this.get(m)||this._setHandleFromNode(e.target.get("node")),this.fire(nt,{dragEvent:e,info:this.info})},_onWrapperMouseEnter:function(){var e=this;e.get(b)&&e._setHideHandlesUI(!1)},_onWrapperMouseLeave:function(){var e=this;e.get(b)&&e._setHideHandlesUI(!0)},_setHandleFromNode:function(e){var t=this,n=t._extractHandleName(e);t.get(z)||(t.set(m,n),t.set(g,e),t._setActiveHandlesUI(!0),t._updateChangeHandleInfo(n))},_onHandleMouseEnter:function(e){this._setHandleFromNode(e.currentTarget)},_onHandleMouseLeave:function(){var e=this;e.get(z)||e._setActiveHandlesUI(!1)},_valueHandlesWrapper:function(){return e.Node.create(this.HANDLES_WRAP_TEMPLATE)},_valueWrapper:function(){var t=this,n=t.get(D),r=n.get(I),i=n;return t.get(K)&&(i=e.Node.create(t.WRAP_TEMPLATE),r&&r.insertBefore(i,n),i.append(n),t._copyStyles(n,i),n.setStyles({position:X,left:0,top:0})),i}}),e.each(e.Resize.prototype.ALL_HANDLES,function(t){e.Resize.ATTRS[dt(t)]={setter:function(){return this._buildHandle(t)},value:null,writeOnce:!0}})},"patched-v3.18.1",{requires:["base","widget","event","oop","dd-drag","dd-delegate","dd-drop"],skinnable:!0});

YUI.add("resize-plugin",function(e,t){var n=function(t){t.node=e.Widget&&t.host instanceof e.Widget?t.host.get("boundingBox"):t.host,t.host instanceof e.Widget?t.widget=t.host:t.widget=!1,n.superclass.constructor.call(this,t)};n.NAME="resize-plugin",n.NS="resize",n.ATTRS={node:{value:undefined},widget:{value:undefined}},e.extend(n,e.Resize,{initializer:function(e){this.set("node",e.node),this.set("widget",e.widget),this.on("resize:resize",function(e){this._correctDimensions(e)})},_correctDimensions:function(e){var t=this.get("node"),n={old:t.getX(),cur:e.currentTarget.info.left},r={old:t.getY(),cur:e.currentTarget.info.top};this.get("widget")&&this._setWidgetProperties(e,n,r),this._isDifferent(n.old,n.cur)&&t.set("x",n.cur),this._isDifferent(r.old,r.cur)&&t.set("y",r.cur)},_setWidgetProperties:function(t,n,r){var i=this.get("widget"),s=i.get("height"),o=i.get("width"),u=t.currentTarget.info.offsetWidth-t.currentTarget.totalHSurrounding,a=t.currentTarget.info.offsetHeight-t.currentTarget.totalVSurrounding;this._isDifferent(s,a)&&i.set("height",a),this._isDifferent(o,u)&&i.set("width",u),i.hasImpl&&i.hasImpl(e.WidgetPosition)&&(this._isDifferent(i.get("x"),n.cur)&&i.set("x",n.cur),this._isDifferent(i.get("y"),r.cur)&&i.set("y",r.cur))},_isDifferent:function(e,t){var n=!1;return e!==t&&(n=t),n}}),e.namespace("Plugin"),e.Plugin.Resize=n},"patched-v3.18.1",{requires:["resize-base","plugin"],optional:["resize-constrain"]});

YUI.add("aui-modal",function(e,t){var n=e.Lang,r=e.UA,i=e.WidgetStdMod,s=e.getClassName,o=s("modal-body"),u=s("modal-footer"),a=s("modal-header"),f=s("modal-open");e.Modal=e.Base.create("modal",e.Widget,[e.WidgetCssClass,e.WidgetPosition,e.WidgetStdMod,e.WidgetToggle,e.WidgetAutohide,e.WidgetToolbars,e.WidgetPositionAlign,e.WidgetPositionConstrain,e.WidgetStack,e.WidgetModality],{CONTENT_TEMPLATE:'<div class="modal-content"></div>',initializer:function(){var t=this,n;n=[e.after(t._afterFillHeight,t,"fillHeight"),e.after("windowresize",e.bind("_afterWindowResize",t)),t.after("render",t._afterRender),t.after("draggableChange",t._afterDraggableChange),t.after("visibleChange",t._afterVisibleChange)],t._applyPlugin(t._plugDrag),t._eventHandles=n},destructor:function(){var t=this;(new e.EventHandle(t._eventHandles)).detach(),t._userInteractionHandle&&t._userInteractionHandle.detach(),e.all("body,html").removeClass(f)},_addBubbleTargets:function(t){var r=this;return n.isObject(t)||(t={}),e.mix(t,{bubbleTargets:r})},_afterFillHeight:function(){var e=this;e._fillMaxHeight(e.get("height"))},_afterDraggableChange:function(t){var n=this;t.newVal?n._applyPlugin(n._plugDrag):n.unplug(e.Plugin.Drag)},_afterRender:function(){this.get("visible")&&e.all("body,html").addClass(f)},_afterVisibleChange:function(t){var n=this;!t.newVal&&n.get("destroyOnHide")&&e.soon(e.bind("destroy",n)),e.all("body,html").toggleClass(f,t.newVal)},_afterWindowResize:function(){var e=this;e.get("centered")&&e.align()},_applyPlugin:function(e){var t=this;r.touchEnabled?e.call(t):t._userInteractionHandle||(t._userInteractionHandle=t.once(["click","mousemove"],t._onUserInitInteraction,t))},_fillMaxHeight:function(e){var t=this,n=t.get("fillHeight"),r=t.getStdModNode(n,!0);r&&r.setStyle("maxHeight",e)},_getStdModTemplate:function(t){return e.Node.create(e.Modal.TEMPLATES[t],this._stdModNode.get("ownerDocument"))},_onUserInitInteraction:function(){var e=this;e._plugDrag(),e._userInteractionHandle.detach(),e._userInteractionHandle=null},_plugDrag:function(){var t=this,n=t.get("draggable");n&&t.plug(e.Plugin.Drag,t._addBubbleTargets(n))}},{CSS_PREFIX:s("modal-dialog"),ATTRS:{bodyContent:{value:""},destroyOnHide:{validator:n.isBoolean,value:!1},draggable:{value:{handles:["."+a],plugins:[{fn:e.Plugin.DDConstrained}]}},toolbars:{valueFn:function(){var e=this;return{header:[{cssClass:"close",discardDefaultButtonCssClasses:!0,labelHTML:"<span> \u00d7 </span>",on:{click:function(t){e.hide(),t.domEvent.stopPropagation()}},render:!0}]}}},toolbarCssClass:{value:{header:"pull-right"}}},TEMPLATES:{header:'<div class="'+i.SECTION_CLASS_NAMES[i.HEADER]+" "+a+'"></div>',body:'<div class="'+i.SECTION_CLASS_NAMES[i.BODY]+" "+o+'"></div>',footer:'<div class="'+i.SECTION_CLASS_NAMES[i.FOOTER]+" "+u+'"></div>'}})},"3.1.0-deprecated.78",{requires:["widget","widget-autohide","widget-buttons","widget-modality","widget-position","widget-position-align","widget-position-constrain","widget-stack","widget-stdmod","dd-plugin","dd-constrain","timers","aui-classnamemanager","aui-widget-cssclass","aui-widget-toggle","aui-widget-toolbars"],skinnable:!0});

YUI.add("aui-modal-resize",function(e,t){function n(){}n.prototype={initializer:function(){var t=this;t._eventHandles.push(e.after(t._plugResize,t,"_plugDrag"),t.after("resizableChange",t._afterResizableChange),t.after("resize:end",e.bind(t._syncResizeDimensions,t))),t._applyPlugin(t._plugResize)},_afterResizableChange:function(t){var n=this;t.newVal?n._applyPlugin(n._plugResize):n.unplug(e.Plugin.Resize)},_beforeResizeCorrectDimensions:function(){var t=this;if(t.resize.proxy)return new e.Do.Prevent},_plugResize:function(){var t=this,n=t.get("resizable");n&&!t.hasPlugin("resizable")&&(t.plug(e.Plugin.Resize,t._addBubbleTargets(n)),e.before(t._beforeResizeCorrectDimensions,t.resize,"_correctDimensions",t))},_syncResizeDimensions:function(e){var t=this,n=t.get("boundingBox"),r=e.info;t.set("width",r.offsetWidth-parseInt(n.getComputedStyle("borderRightWidth"),10)-parseInt(n.getComputedStyle("borderLeftWidth"),10)),t.set("height",r.offsetHeight-parseInt(n.getComputedStyle("borderTopWidth"),10)-parseInt(n.getComputedStyle("borderBottomWidth"),10))}},n.ATTRS={resizable:{value:{handles:"br"}}},e.Base.mix(e.Modal,[n])},"3.1.0-deprecated.78",{requires:["aui-modal","resize-plugin"]});

YUI.add("querystring-parse",function(e,t){var n=e.namespace("QueryString"),r=function(t){return function r(i,s){var o,u,a,f,l;return arguments.length!==2?(i=i.split(t),r(n.unescape(i.shift()),n.unescape(i.join(t)))):(i=i.replace(/^\s+|\s+$/g,""),e.Lang.isString(s)&&(s=s.replace(/^\s+|\s+$/g,""),isNaN(s)||(u=+s,s===u.toString(10)&&(s=u))),o=/(.*)\[([^\]]*)\]$/.exec(i),o?(f=o[2],a=o[1],f?(l={},l[f]=s,r(a,l)):r(a,[s])):(l={},i&&(l[i]=s),l))}},i=function(t,n){return t?e.Lang.isArray(t)?t.concat(n):!e.Lang.isObject(t)||!e.Lang.isObject(n)?[t].concat(n):s(t,n):n},s=function(e,t){for(var n in t)n&&t.hasOwnProperty(n)&&(e[n]=i(e[n],t[n]));return e};n.parse=function(t,n,s){return e.Array.reduce(e.Array.map(t.split(n||"&"),r(s||"=")),{},i)},n.unescape=function(e){return decodeURIComponent(e.replace(/\+/g," "))}},"patched-v3.18.1",{requires:["yui-base","array-extras"]});

YUI.add("querystring-stringify",function(e,t){var n=e.namespace("QueryString"),r=[],i=e.Lang;n.escape=encodeURIComponent,n.stringify=function(e,t,s){var o,u,a,f,l,c,h=t&&t.sep?t.sep:"&",p=t&&t.eq?t.eq:"=",d=t&&t.arrayKey?t.arrayKey:!1;if(i.isNull(e)||i.isUndefined(e)||i.isFunction(e))return s?n.escape(s)+p:"";if(i.isBoolean(e)||Object.prototype.toString.call(e)==="[object Boolean]")e=+e;if(i.isNumber(e)||i.isString(e))return n.escape(s)+p+n.escape(e);if(i.isArray(e)){c=[],s=d?s+"[]":s,f=e.length;for(a=0;a<f;a++)c.push(n.stringify(e[a],t,s));return c.join(h)}for(a=r.length-1;a>=0;--a)if(r[a]===e)throw new Error("QueryString.stringify. Cyclical reference");r.push(e),c=[],o=s?s+"[":"",u=s?"]":"";for(a in e)e.hasOwnProperty(a)&&(l=o+a+u,c.push(n.stringify(e[a],t,l)));return r.pop(),c=c.join(h),!c&&s?s+"=":c}},"patched-v3.18.1",{requires:["yui-base"]});

YUI.add("aui-url",function(e,t){function y(e){var t=this;if(!e)throw"An URL should be specified.";t._indexParts(e),t._indexParameters()}var n=e.QueryString,r="://",i=0,s=1,o=2,u=3,a=4,f=5,l=6,c=7,h=8,p=9,d=10,v=11,m=12,g=13;y.URI_REGEX_RFC3986=new RegExp("^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)"),e.mix(y.prototype,{_source:undefined,_protocol:undefined,_authority:undefined,_user_info:undefined,_user:undefined,_password:undefined,_host:undefined,_port:undefined,_relative:undefined,_path:undefined,_directory:undefined,_file:undefined,_query:undefined,_anchor:undefined,_parameters:undefined,addParameter:function(t,n){var r=this;r.setParameter(t,r.hasParameter(t)?e.Array(r.getParameter(t)).concat(n):n)},addParameters:function(t){var n=this;e.each(t,function(e,t){n.addParameter(t,e)})},hasParameter:function(e){var t=this;return t._parameters.hasOwnProperty(e)},getParameter:function(e){var t=this;return t._parameters[e]},getParameters:function(){var e=this;return e._parameters},getAnchor:function(){var e=this;return e._anchor},getAuthority:function(){var e=this;return e._authority},getDirectory:function(){var e=this;return e._directory},getFile:function(){var e=this;return e._file},getHost:function(){var e=this;return e._host},getPassword:function(){var e=this;return e._password},getPath:function(){var e=this;return e._path},getPort:function(){var e=this;return e._port},getProtocol:function(){var e=this;return e._protocol},getQuery:function(){var e=this;return e._query},getRelative:function(){var e=this;return e._relative},getSource:function(){var e=this;return e._source},getUser:function(){var e=this;return e._user},getUserInfo:function(){var e=this;return e._user_info},removeParameter:function(e){var t=this;delete t._parameters[e],t._indexParameters()},removeParameters:function(t){var n=this;e.each(t,function(e,t){n.removeParameter(t)})},setParameter:function(e,t){var n=this;n._parameters[e]=t,n._indexParameters()},setParameters:function(t){var n=this;e.each(t,function(e,t){n.setParameter(t,e)})},setAnchor:function(e){var t=this;t._anchor=e},setAuthority:function(e){var t=this;t._authority=e},setDirectory:function(e){var t=this;t._directory=e},setFile:function(e){var t=this;t._file=e},setHost:function(e){var t=this;t._host=e},setPassword:function(e){var t=this;t._password=e},setPath:function(e){var t=this;t._path=e},setPort:function(e){var t=this;t._port=e},setProtocol:function(e){var t=this;t._protocol=e},setRelative:function(e){var t=this;t._relative=e},setSource:function(e){var t=this;t._source=e},setUser:function(e){var t=this;t._user=e},setUserInfo:function(e){var t=this;t._user_info=e},toString:function(){var e=this,t=[];return e._protocol&&t.push(e._protocol,r),t.push(e._authority,e._path),e._query&&t.push("?",e._query),e._anchor&&t.push("#",e._anchor),t.join("")},_indexParameters:function(){var e=this;e._parameters||(e._parameters=n.parse(e._query||"")),e._query=n.stringify(e._parameters)},_indexParts:function(e){var t=this,n=y.URI_REGEX_RFC3986.exec(e);t._source=n[i],t._protocol=n[s],t._authority=n[o],t._user_info=n[u],t._user=n[a],t._password=n[f],t._host=n[l],t._port=n[c],t._relative=n[h],t._path=n[p],t._directory=n[d],t._file=n[v],t._query=n[m],t._anchor=n[g]}},!0),e.Url=y},"3.1.0-deprecated.78",{requires:["oop","querystring-parse","querystring-stringify"]});

AUI.add("liferay-widget-zindex",function(A){var STR_HOST="host";var WidgetZIndex=A.Component.create({EXTENDS:A.Plugin.Base,NAME:"widgetzindex",NS:"zindex",prototype:{_setHostZIndex:function _setHostZIndex(){var instance=this;instance.get(STR_HOST).set("zIndex",++Liferay.zIndex.WINDOW)},initializer:function initializer(){var instance=this;var host=instance.get(STR_HOST);if(!host.get("rendered")&&host.get("visible"))instance._setHostZIndex();instance.onHostEvent("visibleChange",function(event){if(event.newVal)instance._setHostZIndex()})}}});
Liferay.WidgetZIndex=WidgetZIndex},"",{requires:["aui-modal","plugin"]});
AUI.add("liferay-util-window",function(A){var DOM=A.DOM;var Lang=A.Lang;var UA=A.UA;var IE=UA.ie;var Util=Liferay.Util;var Window=Util.Window;var IE9=IE==9;var IE11=IE==11;var setWidth=function setWidth(modal,width){if(IE9){modal.set("width",width+1);modal.set("width",width)}};var LiferayModal=A.Component.create({ATTRS:{autoHeight:{value:false},autoHeightRatio:{value:.95},autoSizeNode:{setter:A.one},autoWidth:{value:false},autoWidthRatio:{value:.95},toolbars:{valueFn:function valueFn(){var instance=
this;return{header:[{cssClass:"close",discardDefaultButtonCssClasses:true,labelHTML:'\x3csvg class\x3d"lexicon-icon" focusable\x3d"false"\x3e\x3cuse href\x3d"'+Liferay.ThemeDisplay.getPathThemeImages()+'/clay/icons.svg#times" /\x3e\x3ctitle\x3e'+"Fin"+"\x3c/title\x3e\x3c/svg\x3e",on:{click:function click(event){instance.hide();event.domEvent.stopPropagation()}},render:true}]}}}},EXTENDS:A.Modal,NAME:A.Modal.NAME,prototype:{}});A.mix(Window,{_bindDOMWinResizeIfNeeded:function _bindDOMWinResizeIfNeeded(){var instance=
this;if(!instance._winResizeHandler)instance._winResizeHandler=A.getWin().after("windowresize",instance._syncWindowsUI,instance)},_bindWindowHooks:function _bindWindowHooks(modal,config){var instance=this;var id=modal.get("id");var openingWindow=config.openingWindow;var refreshWindow=config.refreshWindow;modal._opener=openingWindow;modal._refreshWindow=refreshWindow;modal.after("destroy",function(){if(modal._opener){var openerInFrame=!!modal._opener.frameElement;if(openerInFrame)if(IE9)instance._syncWindowsUI();
else if(IE11)instance._resetFocus(modal)}instance._unregister(modal);modal=null});var liferayHandles=modal._liferayHandles;liferayHandles.push(Liferay.after("hashChange",function(event){modal.iframe.set("uri",event.uri)}));liferayHandles.push(Liferay.after("popupReady",function(event){var iframeId=id+instance.IFRAME_SUFFIX;if(event.windowName===iframeId){event.dialog=modal;event.details[0].dialog=modal;var iframeNode=modal.iframe.node;var iframeElement=iframeNode.getDOM();if(event.doc){var modalUtil=
event.win.Liferay.Util;modalUtil.Window._opener=modal._opener;modalUtil.Window._name=id;iframeElement.onload=function(){Util.afterIframeLoaded(event)}}iframeNode.focus();if(UA.ios)iframeNode.attr("scrolling","no")}}))},_ensureDefaultId:function _ensureDefaultId(config){var instance=this;if(!Lang.isValue(config.id))config.id=A.guid();if(!config.iframeId)config.iframeId=config.id+instance.IFRAME_SUFFIX},_getDialogIframeConfig:function _getDialogIframeConfig(config){var dialogIframeConfig;var iframeId=
config.iframeId;var uri=config.uri;if(uri){if(config.cache===false)uri=Liferay.Util.addParams(A.guid()+"\x3d"+Date.now(),uri);var iframeURL=new A.Url(uri);var namespace=iframeURL.getParameter("p_p_id");var bodyCssClass=["dialog-iframe-popup"];if(config.dialogIframe&&config.dialogIframe.bodyCssClass)bodyCssClass.push(config.dialogIframe.bodyCssClass);iframeURL.addParameter("_"+namespace+"_bodyCssClass",bodyCssClass.join(" "));uri=iframeURL.toString();var defaultDialogIframeConfig={bodyCssClass:""};
dialogIframeConfig=A.merge(defaultDialogIframeConfig,config.dialogIframe,{bindLoadHandler:function bindLoadHandler(){var instance=this;var modal=instance.get("host");var popupReady=false;var liferayHandles=modal._liferayHandles;liferayHandles.push(Liferay.on("popupReady",function(event){instance.fire("load",event);popupReady=true}));liferayHandles.push(instance.node.on("load",function(){if(!popupReady)Liferay.fire("popupReady",{windowName:iframeId});popupReady=false}))},iframeId:iframeId,iframeTitle:config.title||
"",uri:uri})}return dialogIframeConfig},_getWindow:function _getWindow(config){var instance=this;var id=config.id;var modalConfig=instance._getWindowConfig(config);var dialogIframeConfig=instance._getDialogIframeConfig(config);var modal=instance.getById(id);if(!modal){var titleNode=A.Node.create(instance.TITLE_TEMPLATE);if(config.stack!==false)A.mix(modalConfig,{plugins:[Liferay.WidgetZIndex]});modal=new LiferayModal(A.merge({cssClass:"modal-full-screen",headerContent:titleNode,id:id},modalConfig));
Liferay.once("screenLoad",function(){modal.destroy()});modal.titleNode=titleNode;instance._register(modal);instance._bindWindowHooks(modal,config)}else{if(!config.zIndex&&modal.hasPlugin("zindex"))delete modalConfig.zIndex;var openingWindow=config.openingWindow;modal._opener=openingWindow;modal._refreshWindow=config.refreshWindow;instance._map[id]._opener=openingWindow;modal.setAttrs(modalConfig)}if(dialogIframeConfig){modal.iframeConfig=dialogIframeConfig;modal.plug(A.Plugin.DialogIframe,dialogIframeConfig);
var originalFn=modal.iframe._onLoadIframe;modal.iframe._onLoadIframe=function(){try{originalFn.call(this)}catch(err){}};modal.get("boundingBox").addClass("dialog-iframe-modal")}if(!Lang.isValue(config.title))config.title="";modal.titleNode.html(Lang.String.escapeHTML(config.title));modal.fillHeight(modal.bodyNode);return modal},_getWindowConfig:function _getWindowConfig(config){var instance=this;var modalConfig=A.merge(instance.DEFAULTS,config.dialog);var height=modalConfig.height;var width=modalConfig.width;
if(height==="auto"||height===""||height===undefined||height>DOM.winHeight())modalConfig.autoHeight=true;if(width==="auto"||width===""||width===undefined||width>DOM.winWidth())modalConfig.autoWidth=true;modalConfig.id=config.id;return modalConfig},_register:function _register(modal){var instance=this;var id=modal.get("id");modal._liferayHandles=[];instance._map[id]=modal;instance._map[id+instance.IFRAME_SUFFIX]=modal},_resetFocus:function _resetFocus(modal){var contentBox=modal.get("contentBox");var input=
contentBox.one("input[type\x3dtext]");if(input)input.getDOM().focus()},_setWindowDefaultSizeIfNeeded:function _setWindowDefaultSizeIfNeeded(modal){var autoSizeNode=modal.get("autoSizeNode");if(modal.get("autoHeight")){var height;if(autoSizeNode)height=autoSizeNode.get("offsetHeight");else height=DOM.winHeight();height*=modal.get("autoHeightRatio");if(modal.get("height")==="auto")modal._fillMaxHeight(height);else modal.set("height",height)}var widthInitial=modal.get("width");if(widthInitial!=="auto")if(modal.get("autoWidth")){var width;
if(autoSizeNode)width=autoSizeNode.get("offsetWidth");else width=DOM.winWidth();width*=modal.get("autoWidthRatio");if(width!=widthInitial)modal.set("width",width);else setWidth(modal,widthInitial)}else setWidth(modal,modal.get("width"))},_syncWindowsUI:function _syncWindowsUI(){var instance=this;var modals=instance._map;A.each(modals,function(modal){if(modal.get("visible")){instance._setWindowDefaultSizeIfNeeded(modal);modal.align()}})},_unregister:function _unregister(modal){var instance=this;var id=
modal.get("id");delete instance._map[id];delete instance._map[id+instance.IFRAME_SUFFIX];A.Array.invoke(modal._liferayHandles,"detach")},_winResizeHandler:null,DEFAULTS:{centered:true,modal:true,visible:true,zIndex:Liferay.zIndex.WINDOW},IFRAME_SUFFIX:"_iframe_",TITLE_TEMPLATE:'\x3ch3 class\x3d"modal-title" /\x3e',getByChild:function getByChild(child){var node=A.one(child).ancestor(".modal",true);return A.Widget.getByNode(node)},getWindow:function getWindow(config){var instance=this;instance._ensureDefaultId(config);
var modal=instance._getWindow(config);instance._bindDOMWinResizeIfNeeded();modal.render();instance._setWindowDefaultSizeIfNeeded(modal);var mask=modal.get("maskNode");if(mask.getStyle("position")=="absolute"){mask.setStyle("height","100%");mask.setStyle("top",document.documentElement.scrollTop+"px");mask.setStyle("width","100%")}modal.align();return modal},hideByChild:function hideByChild(child){var instance=this;return instance.getByChild(child).hide()},refreshByChild:function refreshByChild(child){var instance=
this;var dialog=instance.getByChild(child);if(dialog&&dialog.io)dialog.io.start()}})},"",{requires:["aui-dialog-iframe-deprecated","aui-modal","aui-url","event-resize","liferay-widget-zindex"]});
AUI.add("liferay-sign-in-modal",function(A){var NAME="signinmodal";var WIN=A.config.win;var SignInModal=A.Component.create({ATTRS:{resetFormValidator:{value:true},signInPortlet:{setter:A.one,value:"#p_p_id_com_liferay_login_web_portlet_LoginPortlet_"}},EXTENDS:A.Plugin.Base,NAME:NAME,NS:NAME,prototype:{_bindUI:function _bindUI(){var instance=this;instance._host.on("click",A.bind("_load",instance));var destroyModal=function destroyModal(){instance.destroy();Liferay.detach("screenLoad",destroyModal)};
Liferay.on("screenLoad",destroyModal)},_load:function _load(event){var instance=this;event.preventDefault();if(instance._signInPortletBody&&instance._hasSignInForm)instance._loadDOM();else instance._loadIO()},_loadDOM:function _loadDOM(){var instance=this;var signInPortletBody=instance._signInPortletBody;if(!instance._originalParentNode)instance._originalParentNode=signInPortletBody.ancestor();instance._setModalContent(signInPortletBody);Liferay.Util.focusFormField(signInPortletBody.one("input:text"))},
_loadIO:function _loadIO(){var instance=this;var modalSignInURL=Liferay.Util.addParams("windowState\x3dexclusive",instance._signInURL);Liferay.Util.fetch(modalSignInURL).then(function(response){return response.text()}).then(function(response){if(response)instance._setModalContent(response);else instance._redirectPage()}).catch(function(){return instance._redirectPage()})},_redirectPage:function _redirectPage(){var instance=this;WIN.location.href=instance._signInURL},_setModalContent:function _setModalContent(content){var instance=
this;var dialog=Liferay.Util.getWindow(NAME);if(!dialog)Liferay.Util.openWindow({dialog:{after:{visibleChange:function visibleChange(event){var signInPortletBody=instance._signInPortletBody;var formValidator=instance._formValidator;if(formValidator&&instance.get("resetFormValidator"))formValidator.resetAllFields();if(!event.newVal&&signInPortletBody){var originalParentNode=instance._originalParentNode;if(originalParentNode)originalParentNode.append(signInPortletBody)}}},height:450,width:560},id:NAME,
title:"Ouvrir une session"},function(dialogWindow){var bodyNode=dialogWindow.bodyNode;bodyNode.plug(A.Plugin.ParseContent);bodyNode.setContent(content)});else{dialog.bodyNode.setContent(content);dialog.show()}},destructor:function destructor(){var dialog=Liferay.Util.getWindow(NAME);if(dialog)dialog.destroy()},initializer:function initializer(){var instance=this;var signInPortlet=instance.get("signInPortlet");if(signInPortlet)instance._signInPortletBody=signInPortlet.one(".portlet-body");var host=
instance.get("host");instance._host=host;instance._signInPortlet=signInPortlet;instance._signInURL=host.attr("href");if(signInPortlet){var formNode=signInPortlet.one("form");if(formNode){var form=Liferay.Form.get(formNode.attr("id"));instance._formValidator="";if(form)instance._formValidator=form.formValidator;instance._hasSignInForm=formNode.hasClass("sign-in-form")}}instance._bindUI()}}});Liferay.SignInModal=SignInModal},"",{requires:["aui-base","aui-component","aui-parse-content","liferay-form",
"liferay-portlet-url","liferay-util-window","plugin"]});
